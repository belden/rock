env:
  PATH: "${PROJECT_PATH}/bin:${PROJECT_PATH}/local/bin:${PATH}"
  BUILD_PATH: "${PROJECT_PATH}/local"
  PERL_LOCAL_LIB_ROOT: "${PROJECT_PATH}/local"
  PERL_MB_OPT: "--install_base ${PROJECT_PATH}/local"
  PERL_MM_OPT: "INSTALL_BASE=${PROJECT_PATH}/local"
  PERL5LIB: "${PROJECT_PATH}/lib:${PROJECT_PATH}/lib/perl5/x86_64-linux:${PROJECT_PATH}/local/lib/perl5"

setup: |

  if [[ -f ./cpanfile ]]; then
    carton install
  fi

build: |

  test -f ./carton.lock

  carton install --deployment

test: |

  prove

clean: |

  rm -fr ${BUILD_PATH}
